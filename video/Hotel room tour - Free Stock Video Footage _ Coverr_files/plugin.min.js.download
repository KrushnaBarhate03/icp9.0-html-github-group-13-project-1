(function(){const texts={headerOffer:"Dear visitor!",messageOffer:"Take action to continue accessing the content on this site",adTitleOffer:"Watch a short ad once a day",adDescriptionOffer:"Thank you for being with us!",messageToUser:"Dear User",messageWhyNot:"Your support is essential for the development of our resource.",message:"For more content, watch a short ad - or you will lose access to our digital materials and the tools used to create them.",agreeButton:"Back",watchAdButton:"Continue",popupMessage:"Thank you for your support!"};const url=new URL(window.location.href.toLowerCase());const params=new URLSearchParams(url.search);if(params.has("optadoffer")){setOfferCapping();function setOfferCapping(){const now=Date.now();const lastRunTimeKey="lastRunTime";const localStorageForOffer=window.localStorage;const lastRunTime=localStorageForOffer.getItem(lastRunTimeKey);const timeRemaining=lastRunTime?1-(now-lastRunTime):1;const urlSearchParams=window.location.href.toLowerCase();const url=new URL(window.location.href.toLowerCase());if(!urlSearchParams.includes("/start")){if(!lastRunTime||now-lastRunTime>1){function loadStylesheet(href){return new Promise((resolve,reject)=>{const link=document.createElement("link");link.href=href;link.rel="stylesheet";link.onload=()=>resolve(link);link.onerror=()=>reject(new Error(`Failed to load stylesheet:${href}`));document.head.appendChild(link);});}
function loadScript(src){return new Promise((resolve,reject)=>{const script=document.createElement("script");script.src=src;script.async=true;script.onload=()=>resolve(script);script.onerror=()=>reject(new Error(`Failed to load script:${src}`));document.head.appendChild(script);});}
Promise.all([loadStylesheet("https://fonts.googleapis.com/icon?family=Material+Icons"),loadScript("https://securepubads.g.doubleclick.net/tag/js/gpt.js"),]).then(()=>{window.googletag=window.googletag||{cmd:[]};let hasScrolled=false;let scrollTimeout;function onScroll(){if(!hasScrolled&&window.scrollY>1001){hasScrolled=true;initAdProcess();window.removeEventListener("scroll",onScroll);}else if(hasScrolled){clearTimeout(scrollTimeout);scrollTimeout=setTimeout(()=>{requestAnimationFrame(()=>{});},200);}}
window.addEventListener("scroll",onScroll);let rewardedSlot;let isRewardedGranted=false;function initAdProcess(){googletag.cmd.push(()=>{if(rewardedSlot){googletag.destroySlots([rewardedSlot]);rewardedSlot=null;}
rewardedSlot=googletag.defineOutOfPageSlot("/121764058,23163305659/coverr.co",googletag.enums.OutOfPageFormat.REWARDED).addService(googletag.pubads());rewardedSlot.setForceSafeFrame(true);googletag.pubads().enableAsyncRendering();googletag.enableServices();isRewardedGranted=false;googletag.pubads().addEventListener("rewardedSlotReady",onRewardedSlotReady);googletag.pubads().addEventListener("rewardedSlotGranted",onRewardedSlotGranted);googletag.pubads().addEventListener("rewardedSlotClosed",onRewardedSlotClosed);googletag.display(rewardedSlot);});}
function onRewardedSlotReady(evt){showRewardModal(evt);document.body.style.overflow="hidden";}
function onRewardedSlotGranted(){isRewardedGranted=true;}
function onRewardedSlotClosed(){if(isRewardedGranted){document.body.style.overflow="auto";removeAllModalsAndStyles();localStorage.setItem(lastRunTimeKey,now);googletag.destroySlots([rewardedSlot]);showPopup(texts.popupMessage,2000);}else{document.body.style.overflow="auto";removeAllModalsAndStyles();googletag.destroySlots([rewardedSlot]);initAd();}}
function removeEventListeners(){googletag.pubads().removeEventListener("rewardedSlotReady",onRewardedSlotReady);googletag.pubads().removeEventListener("rewardedSlotGranted",onRewardedSlotGranted);googletag.pubads().removeEventListener("rewardedSlotClosed",onRewardedSlotClosed);}
function initAd(){removeEventListeners();initAdProcess();}}).catch((error)=>console.error(error));function showRewardModal(evt){const overlay=document.createElement("div");overlay.style.cssText=`position:fixed!important;top:0!important;left:0!important;width:100%!important;height:100%!important;background-color:rgba(0,0,0,0.5)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:2147483646!important;box-sizing:unset!important;`;const trigger=document.createElement("div");trigger.id="rewardModal";trigger.style.cssText=`background-color:rgb(14 14 14)!important;border-radius:10px!important;padding:30px!important;box-shadow:0 4px 8px rgba(0,0,0,0.1)!important;text-align:center!important;max-width:90%!important;width:400px!important;position:relative!important;display:flex!important;flex-direction:column!important;box-sizing:unset!important;border:0.1px solid rgb(26 26 26)!important`;const style=document.createElement("style");style.innerHTML=`@media(max-width:900px){#rewardModal{padding:20px!important;width:calc(100%-40px)!important;margin:0 20px!important;}#rewardModal h2{font-size:18px!important;}#rewardModal p{font-size:14px!important;}#rewardModal.ad-container{flex-direction:column!important;align-items:center!important;}#rewardModal.adTextOffer{padding:0px!important;}}`;document.head.appendChild(style);const logoOffer=document.createElement("img");logoOffer.src="https://lh3.googleusercontent.com/9J5-BdMafAdOMqtsOfwypVN2xhG28mbFO5Q5RhE8dEuOzQ8fEW2hxFIr2Z37HLXxJhzae0-vYnX-QeVm4grg-tsEl5BlUqeki8_eL7wDlANXxzF_NT8N";logoOffer.style.cssText=`margin:auto!important;max-height:60px!important;min-height:40px!important;object-fit:contain!important;margin-bottom:10px!important;`;trigger.appendChild(logoOffer);const headerOffer=document.createElement("h2");headerOffer.innerHTML=texts.headerOffer;headerOffer.style.cssText=`overflow-wrap:break-word!important;font-weight:500!important;font-style:normal!important;text-decoration:initial!important;text-align:center!important;font-family:Gilroy,sans-serif!important;color:#c3c2c6!important;font-size:1.25em!important;width:100%!important;margin:0px 0px 10px!important;line-height:40px!important;`;trigger.appendChild(headerOffer);const messageOffer=document.createElement("p");messageOffer.innerHTML=texts.messageOffer;messageOffer.style.cssText=`line-height:1.5em!important;margin:0px 0px 10px 0px!important;padding:0px!important;width:100%!important;max-width:400px!important;overflow-wrap:break-word!important;font-weight:normal!important;font-style:normal!important;text-decoration:initial!important;text-align:center!important;font-family:Gilroy,sans-serif!important;color:#c3c2c6!important;font-size:1em!important;`;trigger.appendChild(messageOffer);const adContainerOffer=document.createElement("button");adContainerOffer.className="ad-container checkOfferWall";adContainerOffer.style.cssText=`border:none!important;cursor:pointer!important;border-radius:5px!important;padding:10px!important;margin-bottom:10px!important;background-color:rgb(26 26 26)!important;display:flex!important;align-items:center!important;flex-direction:row!important;justify-content:space-between!important;`;const adTextOffer=document.createElement("div");adTextOffer.className="adTextOffer";adTextOffer.style.cssText=`color:#333!important;display:flex!important;flex-direction:column!important;align-items:baseline!important;padding:10px!important;max-width:88%!important;`;adContainerOffer.appendChild(adTextOffer);const adTitleOffer=document.createElement("strong");adTitleOffer.innerText=texts.adTitleOffer;adTitleOffer.style.cssText=`text-align:left;margin:0px!important;overflow:hidden!important;overflow-wrap:break-word!important;font-weight:500!important;font-style:normal!important;text-decoration:initial!important;font-family:Gilroy,sans-serif!important;color:#c3c2c6!important;font-size:14px!important;`;const adDescriptionOffer=document.createElement("div");adDescriptionOffer.innerText=texts.adDescriptionOffer;adDescriptionOffer.style.cssText=`color:#c3c2c6!important;margin:5px 0px 0px!important;overflow:hidden!important;overflow-wrap:break-word!important;font-weight:500!important;font-style:normal!important;text-decoration:initial!important;font-family:Gilroy,sans-serif!important;font-size:14px!important;font-weight:400!important;text-align:left;`;adTextOffer.appendChild(adTitleOffer);adTextOffer.appendChild(adDescriptionOffer);const watchAdButton=document.createElement("i");watchAdButton.className="fc-choice-icon fc-rewarded-icon";watchAdButton.id="watchAdBtn";watchAdButton.innerHTML="play_circle_filled";watchAdButton.style.cssText=`color:linear-gradient(87deg,#F0C 0%,#339 100%)!important;cursor:pointer!important;font-size:24px!important;font-family:'Material Icons'!important;font-style:normal!important;`;adContainerOffer.appendChild(watchAdButton);trigger.appendChild(adContainerOffer);document.body.appendChild(overlay);overlay.appendChild(trigger);const makeVisibleFn=(e)=>{evt.makeRewardedVisible();e.preventDefault();adContainerOffer.removeEventListener("click",makeVisibleFn);overlay.remove();};adContainerOffer.addEventListener("click",makeVisibleFn);const closeModalFn=()=>{showConfirmationModal(trigger,overlay,evt);};const closeBtn=document.createElement("button");closeBtn.innerHTML="&times;";closeBtn.style.cssText=`position:absolute!important;top:10px!important;right:10px!important;background:none!important;border:none!important;color:#c3c2c6!important;font-size:20px!important;cursor:pointer!important;`;trigger.appendChild(closeBtn);closeBtn.addEventListener("click",closeModalFn);}
function showConfirmationModal(trigger,overlay,evt){const confirmationOverlay=document.createElement("div");confirmationOverlay.style.cssText=`position:fixed!important;top:0!important;left:0!important;width:100%!important;height:100%!important;background-color:rgba(0,0,0,0.5)!important;display:flex!important;align-items:center!important;justify-content:center!important;z-index:2147483646!important;`;const modal=document.createElement("div");modal.style.cssText=`background-color:rgb(26 26 26)!important;border-radius:10px!important;padding:20px!important;box-shadow:0 4px 8px rgba(0,0,0,0.1)!important;text-align:center!important;max-width:90%!important;width:300px!important;position:relative!important;flex-direction:row!important;flex-wrap:wrap!important;align-content:center!important;justify-content:space-around!important;align-items:center!important;border:0.1px solid rgb(26 26 26)!important`;const messageToUser=document.createElement("h3");messageToUser.innerHTML=texts.messageToUser;messageToUser.style.cssText=`margin-bottom:20px!important;font-size:16px!important;color:#c3c2c6!important;overflow:hidden!important;font-size:1.2rem!important;`;modal.appendChild(messageToUser);const messageWhyNot=document.createElement("p");messageWhyNot.innerHTML=texts.messageWhyNot;messageWhyNot.style.cssText=`line-height:1.4em!important;margin-bottom:20px!important;font-size:16px!important;color:#c3c2c6!important;overflow:hidden!important;`;modal.appendChild(messageWhyNot);const message=document.createElement("p");message.innerHTML=texts.message;message.style.cssText=`line-height:1.4em!important;margin-bottom:20px!important;font-size:16px!important;color:#c3c2c6!important;overflow:hidden!important;`;modal.appendChild(message);const agreeButton=document.createElement("button");agreeButton.innerHTML=texts.agreeButton;agreeButton.style.cssText=`background-color:rgb(8 8 8)!important;border-radius:15px;border:1px solid rgba(63,63,63,0.38);color:#c3c2c6!important;padding:10px 10px!important;border-radius:5px!important;cursor:pointer!important;margin-right:10px!important;white-space:nowrap!important;overflow:hidden!important;`;modal.appendChild(agreeButton);const watchAdButton=document.createElement("button");watchAdButton.innerHTML=texts.watchAdButton;watchAdButton.style.cssText=`background:linear-gradient(87deg,#F0C 0%,#339 100%)!important;border:none!important;color:white!important;padding:10px 20px!important;border-radius:5px!important;cursor:pointer!important;white-space:nowrap!important;overflow:hidden!important;border-radius:15px;border:2px solid#fff;`;modal.appendChild(watchAdButton);confirmationOverlay.appendChild(modal);document.body.appendChild(confirmationOverlay);agreeButton.addEventListener("click",()=>{confirmationOverlay.remove();});watchAdButton.addEventListener("click",()=>{trigger.remove();overlay.remove();removeAllModalsAndStyles();confirmationOverlay.remove();evt.makeRewardedVisible();});}
function showPopup(message,duration){const popupThanksMessage=document.createElement("div");popupThanksMessage.id="popupThanksMessage";popupThanksMessage.innerHTML=message;popupThanksMessage.style.cssText=`position:fixed!important;bottom:20px!important;left:50%!important;transform:translate(-50%,0px)!important;white-space:nowrap!important;overflow:hidden!important;background-color:rgba(0,0,0,0.85)!important;color:white!important;padding:10px 20px!important;border-radius:5px!important;display:none!important;z-index:2147483646!important;width:fit-content!important;`;document.body.appendChild(popupThanksMessage);popupThanksMessage.style.display="block";setTimeout(()=>{popupThanksMessage.style.display="none";},duration);}
function removeAllModalsAndStyles(){const overlays=document.querySelectorAll(".overlay, .confirmationOverlay, .blockedMessageOverlay");const styleElement=document.querySelector("style");overlays.forEach((overlay)=>overlay.remove());if(styleElement)styleElement.remove();}
console.log("Rewarded Ad script initialized.");}else{const timeRemainingInMinutes=Math.floor(timeRemaining/60000);const timeRemainingInHours=Math.floor(timeRemainingInMinutes/60);console.log(`Offer Capping active,next run in hours ${timeRemainingInHours}hours`);}}}}})();